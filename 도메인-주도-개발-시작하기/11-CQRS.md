### 단일 모델의 단점

여러 애그리거트에서 조회가 필요할 때 구현 방식을 고민해야 한다.

- 식별자를 이용한 애그리거트 참조 방식
- 즉시 로딩 또는 지연 로딩
- 네이티브 쿼리

<br>

## CQRS (Command Query Reponsibility Segregation)

### 정의

상태를 변경하는 `명령(Command)` 를 위한 모델과 상태를 제공하는 `조회(Query)` 를 위한 모델을 분리하는 패턴

<br>

### 구현

#### 명령 모델과 조회 모델이 같은 구현 기술을 사용

- JPQL을 이용한 `동적 인스턴스` 와 하이버네이트의 `@Subselect` 이용 (5장 참고)

#### 명령 모델과 조회 모델이 다른 데이터 저장소를 사용

- 조회 성능이 좋은 메모리 기반 `NoSQL` 이용
  - `이벤트` 를 활용해 두 저장소 간 데이터 동기화

<br>

### 장점

- 조회 모델을 별도로 만들어 `도메인 모델` 이 복잡해지는 것을 막는다. <br>
  → 도메인 자체에 집중할 수 있다.
- 각 모델에 맞는 구현 기술을 선택할 수 있다.
- 조회 성능을 향상시키는 데 유리하다.
  - 조회 단위로 `캐시` 적용
  - 조회 전용 저장소로 조회 처리량을 대폭 상승

<br>

### 단점

- 구현해야 할 코드가 많아진다.
- 더 많은 구현 기술이 필요하다.
