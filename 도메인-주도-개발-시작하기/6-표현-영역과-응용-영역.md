> 표현 영역 → 응용 영역 → 도메인 영역

### 응용 영역(서비스)

#### 책임

`사용자(클라이언트)` 가 요청한 기능을 리포지토리에서 `도메인 객체` 를 사용해 구현한다.

- `트랜잭션 처리` 및 `접근 제어`, `이벤트 처리` 를 담당한다.
- 표현 영역과 도메인 영역을 연결한다. <br>
  → `파사드(facade) 패턴` 과 같은 역할이다.

#### 주의 사항

도메인 로직을 넣지 않는다.
- 코드의 `응집성` 이 떨어진다.
- 여러 응용 서비스에서 동일한 도메인 로직을 구현할 가능성이 높아진다.

#### 구현

1. 응용 서비스의 크기

- 한 클래스에 모든 기능 구현하기 <br>
  - 장점: 각 기능에서 동일 로직에 대한 코드 중복을 제거할 수 있다.
  - 단점: 클래스의 코드 크기가 커져 연관성이 적은 코드가 한 클래스에 함께 위치할 가능성이 높아진다.

- 구분되는 기능별로 여러 클래스에 구현하기 <br>
  - 장점: 꼭 필요한 객체만 의존해 다른 기능르 구현한 코드에 영향을 받지 않는다.
  - 단점: 동일 로직에 대한 코드 중복이 발생할 수 있다. → 별도 클래스에 로직을 구현해 중복을 방지할 수 있다.

2. 인터페이스의 필요성

- 응용 서비스는 런타임에 교체되는 경우가 거의 없고 한 응용 서비스의 구현 클래스가 두 개인 경우도 드물다. <br>
  → 굳이 인터페이스를 구현하면 소스파일만 많아지고 전체 구조가 복잡해진다.

3. 메서드 파라미터와 값 리턴

- 스프링 MVC를 비롯한 웹 프레임워크는 웹 요청 파라미터를 자바 객체로 변환하는 기능을 제공한다. <br>
  → 응용 서비스에 데이터로 전달할 파라미터가 두 개 이상이면 별도 클래스를 구현하는 것이 편리하다.

- 코드의 응집도를 위해 응용 서비스는 표현 영역에서 필요한 데이터만 리턴하는 것이 좋다.

4. 표현 영역에 대한 의존

- 표현 영역과 관련된 타입을 사용하지 않는다.

  - 응용 서비스만 단독으로 테스트하기 어려워진다.
  - 표현 영역의 구현에 응용 서비스의 구현이 의존하게 된다.
  - 표현 영역의 응집도가 깨진다.

<br>

### 표현 영역

#### 책임

- 사용자가 시스템을 사용할 수 있는 `흐름(화면)` 을 제공하고 제어한다.
- 사용자의 요청을 알맞은 응용 서비스에 전달하고 결과를 사용자에게 전달한다.
- 사용자의 `세션` 을 관리한다.

<br>

### 구현

#### 값 검증

- 원칙적으로 모든 값에 대한 검증은 응용 서비스에서 처리한다.
- 구현의 편리함을 위해 다음과 같이 역할을 나누어 검증을 수행할 수도 있다.
  - 표현 영역: 필수 값, 값의 형식, 범위 등을 검사한다.
  - 응용 서비스: 데이터의 존재 유무와 같은 `논리적 오류` 를 검증한다.

#### 권한 검사

- 표현 영역: `서블릿 필터(Servlet Filter)` 를 활용해 기본적인 권한 검사를 할 수 있다.
- 응용 서비스: `AOP` 를 활용해 서비스 메서드에 대한 권한 검사를 할 수 있다.
- 도메인
